<!DOCTYPE html>
<html>
<script src="http://cdn.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script src="http://cdn.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/three.js/r71/three.min.js"></script>
<link href="style.css" rel="stylesheet" type="text/css">
<head>

</head>
<body>
    <img id="stream_1" src="http://192.168.3.161:8080/stream?topic=/stream_1"
         style="display: inline; margin: auto; width: 640px; height: 480px"><img/>
    <img src="http://192.168.3.161:8080/stream?topic=/stream_2"
         style="display: inline; margin: auto; width: 640px; height: 480px"><img/>

    <div id="image_modal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img">
        <div id="checkboxes" class="modal-content">
            <input type="checkbox" value="OpenPose">OpenPose
            <input type="checkbox" value="Tracking">Tracking
            <input type="checkbox" value="Non-AI">Non-AI
        </div>
        <div id="caption"></div>
    </div>

    <select id="params" onchange="sendParams()">
        <option value="op">OpenPose</option>
        <option value="td">Tracking-with-darkflow</option>
        <option value="pc">Person_counter</option>
    </select>
<script>
    var modal = document.getElementById('image_modal');

    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var img = document.getElementById('stream_1');
    var modalImg = document.getElementById("img");
    var captionText = document.getElementById("caption");
    img.onclick = function(){
        modal.style.display = "block";
        modalImg.src = this.src;
        captionText.innerHTML = this.alt;
    }

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
        modal.style.display = "none";
    }

    var ros = new ROSLIB.Ros();

    ros.on('connection', function() { console.log('Connected to websocket server.');});

    ros.on('error', function(error) { console.log('Error connecting to websocket server: ', error); window.alert('Error connecting to websocket server'); });

    ros.on('close', function() { console.log('Connection to websocket server closed.');});

    var paramTopic = new ROSLIB.Topic({
        ros : ros,
        name : '/testtopic',
        messageType : 'std_msgs/String'
    });

    var msg = new ROSLIB.Message({
        data : "20"
    });

    function sendParams(){
        paramTopic.publish(msg);
    }
</script>
</body>
</html>
